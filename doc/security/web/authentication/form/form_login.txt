https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html

loginurlauthenticationentrypoint.png
1、首先用户访问未授权的资源/private
2、Spring Security通过AuthorizationFilter进行认证处理，由于该请求没有经过认证，所以会抛出 AccessDeniedException异常
3、由于用户没有认证，所以ExceptionTranslationFilter处理后会通过AuthenticationEntryPoint处理,多数情况下为LoginUrlAuthenticationEntryPoint,然后进行重定向到登录页
4、浏览器展示登录页并需要用户输入账号和密码

usernamepasswordauthenticationfilter.png

5、用户提交账号和密码后，会经过UsernamePasswordAuthenticationFilter 然后创建一个UsernamePasswordAuthenticationToken 进行身份验证，其中UsernamePasswordAuthenticationFilter扩展AbstractAuthenticationProcessingFilter
6、接下来，UsernamePasswordAuthenticationToken将传入AuthenticationManager要进行身份验证.
7、认证失败，SecurityContextHolder将会清除Authentication,RememberMeServices.loginFail被调用。如果未配置记住我,则不做任何操作，AuthenticationFailureHandler被调用
8、认证成功,SessionAuthenticationStrategy收到新登录通知，Authentication会设置到 SecurityContextHolder，RememberMeServices.loginSuccess被调用。如果未配置记住我，则不做任何操作ApplicationEventPublisher发布了一个InteractiveAuthenticationSuccessEvent事件，AuthenticationSuccessHandler被调用,进行认证成功处理
